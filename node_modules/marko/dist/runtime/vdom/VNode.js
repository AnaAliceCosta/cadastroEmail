/* jshint newcap:false */
function VNode() {}

VNode.prototype = {
    bv_: function (finalChildCount) {
        this.bG_ = finalChildCount;
        this.bH_ = 0;
        this.bz_ = null;
        this.bI_ = null;
        this.bw_ = null;
        this.bx_ = null;
    },

    aF_: null,

    get S_() {
        var firstChild = this.bz_;

        if (firstChild && firstChild.by_) {
            var nestedFirstChild = firstChild.S_;
            // The first child is a DocumentFragment node.
            // If the DocumentFragment node has a first child then we will return that.
            // Otherwise, the DocumentFragment node is not *really* the first child and
            // we need to skip to its next sibling
            return nestedFirstChild || firstChild.aw_;
        }

        return firstChild;
    },

    get aw_() {
        var nextSibling = this.bx_;

        if (nextSibling) {
            if (nextSibling.by_) {
                var firstChild = nextSibling.S_;
                return firstChild || nextSibling.aw_;
            }
        } else {
            var parentNode = this.bw_;
            if (parentNode && parentNode.by_) {
                return parentNode.aw_;
            }
        }

        return nextSibling;
    },

    bn_: function (child) {
        this.bH_++;

        if (this.bD_ === true) {
            if (child.bJ_) {
                var childValue = child.aH_;
                this.bC_ = (this.bC_ || "") + childValue;
            } else {
                throw TypeError();
            }
        } else {
            var lastChild = this.bI_;

            child.bw_ = this;

            if (lastChild) {
                lastChild.bx_ = child;
            } else {
                this.bz_ = child;
            }

            this.bI_ = child;
        }

        return child;
    },

    bE_: function finishChild() {
        if (this.bH_ === this.bG_ && this.bw_) {
            return this.bw_.bE_();
        } else {
            return this;
        }
    }

    // ,toJSON: function() {
    //     var clone = Object.assign({
    //         nodeType: this.nodeType
    //     }, this);
    //
    //     for (var k in clone) {
    //         if (k.startsWith('_')) {
    //             delete clone[k];
    //         }
    //     }
    //     delete clone._nextSibling;
    //     delete clone._lastChild;
    //     delete clone.parentNode;
    //     return clone;
    // }
};

module.exports = VNode;